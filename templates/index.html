<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>FastAPI Split View Dashboard</title>
    <script src="https://cdn.jsdelivr.net/npm/ag-grid-community/dist/ag-grid-community.min.noStyle.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/ag-grid-community/styles/ag-grid.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/ag-grid-community/styles/ag-theme-alpine.css">

    <style>
        /* ì „ì²´ ë ˆì´ì•„ì›ƒ ì„¤ì • */
        body {
            margin: 0;
            padding: 0;
            display: flex; /* ê°€ë¡œë¡œ ë°°ì¹˜ */
            height: 100vh;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            overflow: hidden;
        }

        /* ì™¼ìª½ íŠ¸ë¦¬ ì˜ì—­ */
        #sidebar {
            width: 250px;
            min-width: 250px;
            background-color: #2c3e50;
            color: white;
            padding: 20px;
            box-shadow: 2px 0 5px rgba(0,0,0,0.1);
            overflow-y: auto;
        }

        /* ì˜¤ë¥¸ìª½ ë°ì´í„° ì˜ì—­ */
        #content-area {
            flex-grow: 1; /* ë‚˜ë¨¸ì§€ ê³µê°„ ëª¨ë‘ ì°¨ì§€ */
            background-color: #ecf0f1;
            padding: 0;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
        }

        /* íŠ¸ë¦¬ ìŠ¤íƒ€ì¼ */
        .tree-header { font-size: 1.2em; margin-bottom: 20px; border-bottom: 1px solid #34495e; padding-bottom: 10px; }
        .dept-node { margin-top: 15px; font-weight: bold; color: #bdc3c7; }
        .team-node {
            padding: 8px 15px;
            cursor: pointer;
            transition: background 0.3s;
            border-radius: 4px;
            margin-left: 10px;
            font-weight: normal;
        }
        .team-node:hover { background-color: #34495e; color: #3498db; }

        /* ì´ˆê¸° ì•ˆë‚´ ë¬¸êµ¬ */
        .welcome-msg {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100%;
            color: #7f8c8d;
        }
    </style>
</head>
<body>

    <div id="sidebar">
        <div class="tree-header">ìš´ì˜ì„œë¹„ìŠ¤ í˜„í™©</div>
        <div id="tree-container">
            <div class="dept-node">ğŸ“ Slack </div>
            <div class="team-node" onclick="loadPage('slack1')">ğŸ“„ Slack(ì§€ì—­ë³„êµ¬ë¶„)</div>
            <div class="team-node" onclick="loadPage('slack2')">ğŸ“„ Slack(ì•ŒëŒë³„êµ¬ë¶„)</div>
            <div class="team-node" onclick="loadPage('slack3')">ğŸ“„ Slack(ìµœê³ ë¹ˆë„ì•ŒëŒ)</div>
            
            <div class="dept-node">ğŸ“ Rancher</div>
            <div class="team-node" onclick="loadPage('team3')">ğŸ“„ í˜„ì¬ í´ëŸ¬ìŠ¤í„°/ë…¸ë“œ ìˆ˜ëŸ‰</div>
            <div class="team-node" onclick="loadPage('team4')">ğŸ“„ ì „ì²´ í´ëŸ¬ìŠ¤íŠ¸ í˜„í™©</div>
            <div class="team-node" onclick="loadPage('team4')">ğŸ“„ ì „ì²´ ë…¸ë“œ í˜„í™©</div>
        </div>
    </div>

    <div id="content-area">
        <div class="welcome-msg">
            <h2>íŠ¸ë¦¬ ë©”ë‰´ì—ì„œ í•­ëª©ì„ ì„ íƒí•´ ì£¼ì„¸ìš”.</h2>
        </div>
    </div>

    <script>
        function loadPage(teamId) {
            const contentArea = document.getElementById('content-area');
            
            fetch(`/pages/${teamId}`)
                .then(res => res.text())
                .then(html => {
                    contentArea.innerHTML = html;

                    // innerHTMLë¡œ ì‚½ì…ëœ <script> íƒœê·¸ëŠ” ìë™ìœ¼ë¡œ ì‹¤í–‰ë˜ì§€ ì•Šìœ¼ë¯€ë¡œ 
                    // ì§ì ‘ ìŠ¤í¬ë¦½íŠ¸ íƒœê·¸ë¥¼ ì°¾ì•„ì„œ ì‹¤í–‰ì‹œì¼œì£¼ëŠ” ê³¼ì •ì´ í•„ìš”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
                    const scripts = contentArea.querySelectorAll("script");
                    scripts.forEach(oldScript => {
                        const newScript = document.createElement("script");
                        newScript.text = oldScript.text;
                        oldScript.parentNode.replaceChild(newScript, oldScript);
                    });

                    // ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰ í›„ initPage í˜¸ì¶œ
                    setTimeout(() => {
                        if (window.initPage) window.initPage(teamId);
                    }, 50); // ì•½ê°„ì˜ ì§€ì—°ì„ ì£¼ì–´ DOM ì•ˆì°© ëŒ€ê¸°
                });
        }
    </script>
</body>
</html>